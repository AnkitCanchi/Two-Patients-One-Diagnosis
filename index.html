<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Two Patients, One Diagnosis</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <header class="topbar">
    <div class="brand">
      <h1>Two Patients, One Diagnosis</h1>
      <p>
        Same diagnosis. Same care steps. Different support.
        Click <b>Next Step</b> to advance both together and watch delays stack.
      </p>
    </div>

    <div class="topActions">
      <button id="nextBtn" class="primary">Next Step (N)</button>
      <button id="pauseBtn" class="ghost">Pause</button>
      <button id="tutorialBtn" class="ghost">Tutorial</button>
      <button id="resetBtn" class="ghost">Reset (R)</button>
    </div>
  </header>

  <main class="layout">
    <section class="sim">
      <div class="simTop">
        <div class="pillRow">
          <span class="pill">Seed: <span id="seedText">-</span></span>
          <span class="pill">Auto-resolve: <span id="autoText">ON</span></span>
          <span class="pill">Countdown: <span id="countdownText">-</span>s</span>
          <span class="pill">Equity Gap: <span id="gapText">0</span> days</span>
        </div>

        <div class="toggleRow">
          <label class="switch">
            <input type="checkbox" id="autoToggle" checked />
            <span>Auto-resolve events (5s)</span>
          </label>
          <label class="switch">
            <input type="checkbox" id="reduceMotion" />
            <span>Reduced motion</span>
          </label>
          <label class="switch">
            <input type="checkbox" id="soundToggle" checked />
            <span>Sound</span>
          </label>
        </div>
      </div>

      <div class="twoCol">
        <section class="patientCard" id="cardA">
          <div class="cardHeader">
            <div class="who">
              <div class="avatar a">A</div>
              <div>
                <div class="name">Patient A</div>
                <div class="tag good">More support</div>
              </div>
            </div>

            <div class="kpis">
              <div class="kpi"><div class="k">Days</div><div class="v" id="daysA">0</div></div>
              <div class="kpi"><div class="k">Stress</div><div class="v" id="stressA">0</div></div>
              <div class="kpi"><div class="k">Step</div><div class="v" id="stepA">-</div></div>
            </div>
          </div>

          <div class="progressBox">
            <div class="track"><div class="fill" id="fillA"></div></div>
            <div class="hint">Goal: Start Treatment</div>
          </div>

          <div class="inventory">
            <div class="sectionTitle">Support Stickers</div>
            <div class="chips" id="invA"></div>
            <div class="smallHint">Spend 1 sticker to cancel a delay (Intervene 1)</div>
          </div>

          <div class="supports">
            <div class="sectionTitle">Personal Supports</div>
            <div class="grid3">
              <label class="check"><input type="checkbox" id="navA" checked /> Navigator</label>
              <label class="check"><input type="checkbox" id="rideA" checked /> Reliable Ride</label>
              <label class="check"><input type="checkbox" id="leaveA" checked /> Paid Leave</label>
            </div>
          </div>

          <div class="log">
            <div class="sectionTitle">Event Feed</div>
            <div class="logBody" id="logA"></div>
          </div>
        </section>

        <section class="patientCard" id="cardB">
          <div class="cardHeader">
            <div class="who">
              <div class="avatar b">B</div>
              <div>
                <div class="name">Patient B</div>
                <div class="tag warn">Less support</div>
              </div>
            </div>

            <div class="kpis">
              <div class="kpi"><div class="k">Days</div><div class="v" id="daysB">0</div></div>
              <div class="kpi"><div class="k">Stress</div><div class="v" id="stressB">0</div></div>
              <div class="kpi"><div class="k">Step</div><div class="v" id="stepB">-</div></div>
            </div>
          </div>

          <div class="progressBox">
            <div class="track"><div class="fill" id="fillB"></div></div>
            <div class="hint">Goal: Start Treatment</div>
          </div>

          <div class="inventory">
            <div class="sectionTitle">Support Stickers</div>
            <div class="chips" id="invB"></div>
            <div class="smallHint">Spend 1 sticker to cancel a delay (Intervene 2)</div>
          </div>

          <div class="supports">
            <div class="sectionTitle">Personal Supports</div>
            <div class="grid3">
              <label class="check"><input type="checkbox" id="navB" /> Navigator</label>
              <label class="check"><input type="checkbox" id="rideB" /> Reliable Ride</label>
              <label class="check"><input type="checkbox" id="leaveB" /> Paid Leave</label>
            </div>
          </div>

          <div class="log">
            <div class="sectionTitle">Event Feed</div>
            <div class="logBody" id="logB"></div>
          </div>
        </section>
      </div>
    </section>

    <aside class="right">
      <section class="panel">
        <div class="panelTitle">Current Step</div>
        <div class="bigStep" id="currentStep">Press Next Step</div>

        <div class="eventBox">
          <div class="eventTitle">Revealed Event</div>
          <div class="eventLine" id="eventLine">No event yet.</div>
          <div class="eventMeta" id="eventMeta"></div>

          <div class="btnRow">
            <button id="interveneA" class="ghost">Intervene A (1)</button>
            <button id="interveneB" class="ghost">Intervene B (2)</button>
          </div>
          <div class="tiny">
            Intervene spends 1 Support Sticker to cancel this event for that patient.
          </div>
        </div>

        <div class="panelTitle">Policy Levers (global)</div>
        <div class="policyGrid">
          <label class="check"><input type="checkbox" id="polNavigator" /> Fund patient navigation</label>
          <label class="check"><input type="checkbox" id="polTransit" /> Transportation vouchers</label>
          <label class="check"><input type="checkbox" id="polAdmin" /> Reduce paperwork + faster approvals</label>
          <label class="check"><input type="checkbox" id="polLeave" /> Paid leave protections</label>
          <label class="check"><input type="checkbox" id="polCapacity" /> Expand clinic capacity</label>
        </div>

        <div class="panelTitle">Analytics</div>
        <div class="chartBox">
          <canvas id="chart" width="360" height="220"></canvas>
          <div class="tiny">Shows category days for A vs B (Insurance, Paperwork, Transport, Work, Childcare, Clinic).</div>
        </div>

        <div class="panelTitle">Tools</div>
        <div class="toolRow">
          <button id="saveBtn" class="ghost">Save</button>
          <button id="loadBtn" class="ghost">Load</button>
          <button id="shareBtn" class="ghost">Copy Share Link</button>
        </div>
        <div class="toolRow">
          <button id="exportBtn" class="ghost">Export Summary</button>
          <button id="clearBtn" class="ghost">Clear Save</button>
        </div>

        <div class="notice" id="notice">Tip: Press N to advance, 1/2 to intervene.</div>
      </section>
    </aside>
  </main>

  <div class="modal hidden" id="modal" role="dialog" aria-modal="true">
    <div class="modalCard">
      <h2 id="modalTitle">Outcome</h2>
      <p id="modalBody"></p>
      <div class="modalBtns">
        <button id="closeModal" class="primary">Close</button>
        <button id="playAgain" class="ghost">Play Again</button>
      </div>
    </div>
  </div>

  <script src="data.js"></script>
  <script src="app.js"></script>
</body>
</html>
